<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
    .m0 {
        text-align: center;
    }
    </style>
</head>

<body>
    <script>
    console.log(writeNumber(9999));

    function writeNumber(num) {
        var str = getZeroes(num.toString());
        var thousands = str[0] + str[1] + str[2];
        var hundreds = str[3] + str[4] + str[5];
        return removeSpaces(writePart(thousands, "female") + " " + writeWordThousands(thousands) + " " + writePart(hundreds, "male"));
    }

    function writePart(str, gender) {
        if (str[1] == 1) {
            return writeHundreds(str[0]) + writeSecondUnits(str[1] + str[2]);
        } else {
            return writeHundreds(str[0]) + writeDecades(str[1]) + writeUnits(str[2], gender);
        }
    }

    function writeWordThousands(str) {
        if (str[0] == 0 && str[1] == 0 && str[2] == 0) {
            return "";
        } else if (str[2] == 1) {
            return "тысяча";
        } else if (str[2] >= 2 && str[2] <= 4) {
            return "тысячи";
        } else {
            return "тысяч";
        }
    }

    function writeUnits(num, gender) {
        if (num == 0) return "";
        var male = ["один", "два", "три", "четыре", "пять", "шесть", "семь", "восемь", "девять"];
        var female = ["одна", "две", "три", "четыре", "пять", "шесть", "семь", "восемь", "девять"];
        if (gender == "male") {
            return male[num - 1]
        } else {
            return female[num - 1]
        }
    }

    function writeHundreds(num) {
        if (num == 0) return "";
        var hundreds = ["сто", "двести", "триста", "четыреста", "пятьсот", "шестьсот", "семьсот", "восемьсот", "девятьсот"];
        return hundreds[num - 1] + " "
    }

    function writeDecades(num) {
        if (num == 0) return "";
        var decades = ["двадцать", "тридцать", "сорок", "пятьдесят", "шестьдесят", "семьдесят", "восемьдесят", "девяносто"];
        return decades[num - 2] + " "
    }

    function writeSecondUnits(num) {
        if (num == 0) return "";
        var secondUnits = ["десять", "одинадцать", "двенадцать", "тринадцать", "четырнадцать", "пятьнадцать", "шестьнадцать", "семьнадцать", "восемьнадцать", "девятьнадцать"];
        return secondUnits[num - 10] + " "
    }

    function getZeroes(str) {
        var zeroes = new Array(6 - str.length + 1).join(" ");
        return zeroes + str;
    }

    function removeSpaces(str) {
        return str.split(" ").filter(function(v) {
            return v !== "";
        }).join(" ")
    }
    </script>
</body>

</html>